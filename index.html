<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>情報I クイズ（最終版カード風）</title>
<link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;600&display=swap" rel="stylesheet">
<style>
body {
  font-family: 'Baloo 2', cursive;
  background: linear-gradient(to bottom, #e0f7fa, #fff);
  margin: 0;
  padding: 20px;
}
h1 {
  text-align: center;
  color: #333;
  margin-bottom: 20px;
}
.quiz-box {
  max-width: 520px;
  margin: 0 auto;
  background: #ffffff;
  border-radius: 15px;
  box-shadow: 0 8px 20px rgba(0,0,0,0.15);
  padding: 25px;
  transition: transform 0.2s;
}
.quiz-box:hover {
  transform: translateY(-3px);
}
#question {
  font-size: 20px;
  font-weight: 600;
  color: #222;
  margin-bottom: 25px;
}
.choice {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  background: #dbeafe;
  border: none;
  border-radius: 12px;
  padding: 16px;
  margin: 12px 0;
  width: 100%;
  font-size: 17px;
  font-weight: 500;
  cursor: pointer;
  position: relative;
  overflow: hidden;
  transition: all 0.3s ease;
}
.choice:hover {
  background: #bfdbfe;
  transform: translateY(-3px);
}
.choice img {
  max-width: 80%;
  margin-top: 8px;
  border-radius: 8px;
  transition: transform 0.3s ease;
}
.choice.correct::after {
  content: "✔";
  color: #16a34a;
  font-size: 22px;
  position: absolute;
  right: 16px;
  top: 50%;
  transform: translateY(-50%);
}
.choice.incorrect::after {
  content: "✖";
  color: #dc2626;
  font-size: 22px;
  position: absolute;
  right: 16px;
  top: 50%;
  transform: translateY(-50%);
}
#result {
  margin-top: 18px;
  font-weight: 600;
  font-size: 16px;
  min-height: 22px;
  transition: all 0.3s ease;
}
#progress, #score {
  margin-top: 12px;
  font-size: 14px;
  color: #555;
}
button#nextBtn, button#restartBtn {
  margin-top: 18px;
  padding: 12px 24px;
  font-size: 17px;
  border-radius: 10px;
  cursor: pointer;
  border: none;
  color: #fff;
  background: #4f46e5;
  transition: 0.3s;
}
button#nextBtn:hover, button#restartBtn:hover {
  background: #4338ca;
}
</style>
</head>
<body>
<h1>情報I クイズ（最終版カード風）</h1>
<div class="quiz-box">
  <p id="question">ここに問題文</p>
  <div id="choices"></div>
  <p id="result"></p>
  <p id="progress"></p>
  <p id="score"></p>
  <button id="nextBtn" style="display:none;">次の問題へ</button>
  <button id="restartBtn" style="display:none;">最初からやり直す</button>
</div>

<script>
let quizData = [];
let currentQuiz = 0;
let score = 0;

const questionEl = document.getElementById("question");
const choicesEl = document.getElementById("choices");
const resultEl = document.getElementById("result");
const progressEl = document.getElementById("progress");
const scoreEl = document.getElementById("score");
const nextBtn = document.getElementById("nextBtn");
const restartBtn = document.getElementById("restartBtn");

function shuffleArray(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
  return array;
}

function loadQuiz() {
  const quiz = quizData[currentQuiz];
  questionEl.textContent = quiz.question;
  resultEl.textContent = "";
  choicesEl.innerHTML = "";
  nextBtn.style.display = "none";
  restartBtn.style.display = "none";

  const shuffledChoices = shuffleArray([...quiz.choices]);
  shuffledChoices.forEach((choice, index) => {
    const btn = document.createElement("button");
    btn.className = "choice";

    if (choice.text) btn.textContent = choice.text;
    if (choice.img) {
      const imgEl = document.createElement("img");
      imgEl.src = choice.img;
      btn.appendChild(imgEl);
    }

    btn.onclick = () => checkAnswer(btn, choice, quiz);
    choicesEl.appendChild(btn);
  });

  progressEl.textContent = `第 ${currentQuiz + 1} 問 / 全 ${quizData.length} 問`;
  scoreEl.textContent = `スコア: ${score} / ${quizData.length}`;
}

function checkAnswer(btn, selectedChoice, quiz) {
  const correctChoice = quiz.choices[quiz.answer];
  if (selectedChoice === correctChoice) {
    resultEl.textContent = "正解！🎉 " + quiz.explanation;
    resultEl.style.color = "#16a34a";
    btn.classList.add("correct");
    score++;
  } else {
    resultEl.textContent = "不正解… 😢 " + quiz.explanation;
    resultEl.style.color = "#dc2626";
    btn.classList.add("incorrect");
  }
  scoreEl.textContent = `スコア: ${score} / ${quizData.length}`;
  nextBtn.style.display = "inline-block";
}

nextBtn.onclick = () => {
  currentQuiz++;
  if (currentQuiz < quizData.length) {
    loadQuiz();
  } else {
    questionEl.textContent = "全問終了！お疲れさま！";
    choicesEl.innerHTML = "";
    resultEl.textContent = `最終スコア: ${score} / ${quizData.length}`;
    progressEl.textContent = "";
    nextBtn.style.display = "none";
    restartBtn.style.display = "inline-block";
  }
};

restartBtn.onclick = () => {
  currentQuiz = 0;
  score = 0;
  shuffleArray(quizData);
  loadQuiz();
};

// サンプルデータ
quizData = [
  {
    "question": "IPアドレスは何を識別する番号？",
    "choices": [
      {"text":"コンピュータや機器","img":null},
      {"text":"ユーザーの名前","img":null},
      {"text":"プログラミング言語","img":null}
    ],
    "answer":0,
    "explanation":"IPアドレスはネットワーク上の機器を識別する番号です。"
  },
  {
    "question": "このアイコンは何を表している？",
    "choices":[
      {"text":"","img":"https://upload.wikimedia.org/wikipedia/commons/thumb/4/4e/Globe_icon.svg/1200px-Globe_icon.svg.png"},
      {"text":"ハードディスク","img":null},
      {"text":"プリンター","img":null}
    ],
    "answer":0,
    "explanation":"地球アイコンはインターネットを表しています。"
  }
];

loadQuiz();
</script>
</body>
</html>
